<!DOCTYPE HTML>
<html lang="de">

  <head>
    <meta charset="UTF-8"/>
    <title>ImageResize Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>   
    <link rel="stylesheet" href="help.css"/>
    <style>
      .otab {text-align: left;}
    </style>
  </head>

  <body>
    <header style="background-image: url('../images/title.jpg');">
      <div class="title-box">
        <div>Atomek</div>
        <div>imgres - command line tool</div>
      </div>
    </header>
  
    <div class="contents">
      <h1 id="overview">Overview</h1>
      <p>
        <i>imgres</i> 3.2 is a command line interface (CLI) for the bulk resizing
        and watermarking tool <i>ImageResize</i>. It converts (resamples)
        JPEG and PNG images.
      </p>

      <pre class="dos">
imgres CLI 3.2 for engine 3.2 (c) 2023 Jan Schirrmacher, www.atomek.de
Free tool for JPEG and PNG quality resampling.

  Usage: imgres filename folder size {-option [param]}

  filename            Is a single JPEG or PNG file, a text filename preceeded by @ with a list of filenames
                      or a wildcard with path/mask. Multiple masks are to be separated by semicolon.
  folder              Where to store the resulting resampled and resized files. The folder must contain
                      the placeholder '%SIZE%' when there are multiple sizes. Non-existing folders
                      will be created.
  size                Is a size in pixels or a comma-separated list of sizes, where the size refers to
                      the longer side of the image.
  {-option [param]}   Is a list of pairs of option/parameter. Some options dont have a parameter.

Options:

short long            parameter   comment
-----------------------------------------
    -j -jpgquality     1..100     A quality from 1 to 100 percent (default is 75)
    -p -pngcompression degree     none|fastest|default|max
    -f -filter         filter     Box, Linear, HalfCosine, Cosine, Bicubic, Mitchell, Spline,
                                  Lanczos2, Lanczos3, Lanczos4, BestQuality
                                  Default is Lanczos2.
    -r -rename         template   Rename files by a template with placeholders.
                                  SIZE% and %INDEX[:n[,d]]% with n=startindex, d=number of digits/auto
    -w -watermark      file.png   A PNG watermark file and optional a position and opacity, see example.
    -s -shake          0..n       shakes the image list, makes sense together with -r.
                                  A random seed of 0 (assumed if ommited) means an unpredictable sequence.
                                  A fix value will shake a list always in the same manner, 
                                  unless the number of files doesnt change.
    -m -meta           sources    EXIF | TAGS | EXIF,TAGS
                                  EXIF loads tags from origin files, TAGS from .tags files
    -e -exif           taglist    writes certain metadata into the resized files.
                                  taglist is a list of special tagnames: "Description,Timestamp,Copyright"
                                  if no meta sources is defined, EXIF is assumed.
    -c -copyright      "text"     Writes (overrides) the EXIF or .tags copyright tag.
    -l -listing        file.csv   Exports a CSV list of filenames and tags.
    -t -threadcount    0..n       Number of threads to use, 0 means maximum.
    -x -stoponerror               Stop on error. flag: 0-false, 1-true
    -h -help                      Outputs this text.
    -q -quit                      Suppresses any message output.

Examples:

  imgres myimage.png \Images\res640 640
    resamples a single png image with the default quality.

  imgres ..\theimage.jpg C:\TEMP\res%SIZE% 480,640,800 -j 50
    resamples a single jpg with 3 different resolutions and stores them to different folders with 50% quality

  imgres @mylist.txt img%SIZE% 640,1920 -j 1 -p max -q
    resamples a list of files which path/name is stored in a file, with smallest file sizes in quiet mode.

  imgres myimages\*.jpg;*.png \MyImages 640 -w "mywatermark.png?10,1,98?50"
    adds a watermark of 10% width, 1% from the left, 2% from the bottom, with 50% opacity.

  imgres DSC4205.jpg C:\TEMP 640 -c "(c) 1941 ACME"
    inserts an EXIF copyright note

  More info at www.atomek.de/imageresize/cli/index.html
                              </pre>

      <h2 id="syntax">Syntax</h2>
      <p>
        imgres <i>filename folder size {options}</i><br/>
      </p>

      <h2 id="params">Parameters</h2>
      <table class="partab">
        <tr>
          <td>
            <i>filename</i><br/>
          </td>
          <td>
            <ol>
              <li>
                Path/filename of the source image file. This can be a JPEG file
                or a PNG file.<br/>
              </li>
              <li>
                Text file with a filename list. The filename must be preceeded
                by @.
              </li>
              <li>
                Path/wildcards - i.e. C:\MyImages\img???.jpg;*.png
              </li>
            </ol>
          </td>
        </tr>
        <tr>
          <td>
            <i>folder</i>
          </td>
          <td>
            The folder where to store the resulting file. This can be a relative
            path. If its the dot '.' the result will be saved "inplaced", replacing
            the source file.<br/>
            If you create multiple files with different sizes, enter a placeholder
            <span class="plh">%SIZE%</span> where the program will insert the size.
          </td>
        </tr>
        <tr>
          <td>
            <i>size</i>
          </td>
          <td>
            Size in pixels of the resampled image. The size refers to the longer
            side of the image. This means, imgres always bewares the width/heigth ratio.<br/>
            You can specify multiple sizes, separated by a comma to let the
            process create multiple resampled files. Because the files will have the
            same names, it is required to enter a placeholder <span class="plh">%SIZE%</span> in
            the dstfolder.
          </td>
        </tr>
      </table>
      <h2 id="params">Options</h2>
      <table class="partab">
        <tr>
          <td>
            <i>-h</i><br/>
            <i>-help</i>
          </td>
          <td>
            Shows a help text.
          </td>
        </tr>
        <tr>
          <td>
            <i>-q</i><br/>
            <i>-quiet</i>
          </td>
          <td>
            Quiet mode, supresses any console output.
          </td>
        </tr>
        <tr>
          <td>
            <i>-j&nbsp;value</i><br/>
            <i>-jpgquality&nbsp;value</i>
          </td>
          <td>
            A value between 1 and 100, where 1 is the lowest and 100 is
            the highest quality. This partameter refers only to JPEG files.
          </td>
        </tr>
        <tr id="filter">
          <td>
            <i>-f&nbsp;name</i><br/>
            <i>-filter&nbsp;name</i>
          </td>
          <td><i>Box</i>, <i>Linear</i>, <i>HalfCosine</i>, <i>Cosine</i>, <i>Bicubic</i>, <i>Mitchell</i>, <i>Spline</i>,
            <i>Lanczos2</i>, <i>Lanczos3</i>, <i>Lanczos4</i>, <i>BestQuality</i><br/>
            The algorithm wich is applied while resampling. Default is <i>Lanczos2</i>
          </td>
        </tr>
        <tr>
          <td>
            <i>-p&nbsp;value</i><br/>
            <i>-pngcompression&nbsp;value</i>
          </td>
          <td>
            One of the strings <i>none</i>,<i>fastest</i>,<i>default</i> and <i>max</i>.
            The PNG format has a loss-less compression, so this parameter has
            an impact to the compression/decompression effort, not to the
            image quality.
          </td>
        </tr>
        <tr id="placing">
          <td>
            <i>-w&nbsp;value</i><br/>
            <i>-watermark value</i>
          </td>
          <td>
            <p>
              A watermark is a PNG image containing a copyright or what ever. The
              watermark can be printed an any position. The position is in percent
              and refers to the images width resp. height. The <i>Size</i> is in
              percent of the images width.
            </p><p>
              The positions in percent refers to the difference of the images
              size and the watermarks size. Thus, 50%/50% centeres the image.
              0% is left/upper alignment, 100% results in a right/bottom
              aligment.
            </p><p>
              The value format is:
            </p><p>
              <b><code>filename[?size,x,y[?opacity]]</code></b>
            </p><p>
              If you want to use spaces, set the parameter in quotes.
              Defaults are size=20%, x=98%, y=98%, opacity=50%
            </p>
          </td>
        </tr>
        <tr>
          <td>
            <i>-t&nbsp;value</i><br/>
            <i>-threadcount value</i>
          </td>
          <td>
            <p>
              0 - (default) uses as many threads as processors are availabe
            </p><p>
              1 - single thread, all resamplings are in sequential order
            </p><p>
              n - number of threads to use. n is automatically limited to either
              the number of available processors or the number of tasks.
            </p><p>
              A "task" is a resampling request. If you have 4 source files and
              2 destination sizes, you will get 8 tasks.
            </p>
          </td>
        </tr>
        <tr>
          <td>
            <i>-x</i><br/>
            <i>-stoponerror</i>
          </td>
          <td>
            <p>
              If an error occures, this flag lets the program stop as soon as possible.
              Note: some tasks may run into the same error and report it.
            </p>
          </td>
        </tr>
        <tr>
          <td>
            <i>-r&nbsp;template</i><br/>
            <i>-rename template</i>
          </td>
          <td>
            <p>
              Enables destination file renaming. Enter a filename template as
              parameter. The template can contain up to 4 placeholders:<br/>
              <span class="plh">%FILENAME%</span> stands for the original file
              title. That is the filename without path and without extension.<br/>
              <span class="plh">%FILEEXT%</span> is the file extension without the
              leading dot.
              <span class="plh">%INDEX[:n[,d]]%</span> is the current number of
              the source image in the list of files. <i>n</i> is the start index,
              default is 1. <i>d</i> is the number of digits to print. The resulting
              number will be filled with leading zeroes. if d is <i>auto</i>, the
              program will calculate the number of digits automatically. This is
              the default. <span class="plh">%INDEX%</span> is equivalent to
              <span class="plh">%INDEX:1,auto%</span>.<br/>
              Destination file renaming with the <span class="plh">%SIZE%</span>
              -placeholder enables you to create all resized images into the
              same folder without any naming conflict.
            </p>
          </td>
        </tr>
        <tr>
          <td>
            <i>-s&nbsp;seed</i><br/>
            <i>-shake seed</i>
          </td>
          <td>
            <p>
              Mixes (shakes) the renamed destination files randomly. To get the same
              (random) sequence of files, enter a <i>seed</i> not equal to zero. Multiple
              executions of the resampling processor will then result in the same order,
              as long as the number of files does not change.
            </p>
            <p>
              A seed of 0 results in another sequence of files you press Execute.
            </p>
            <p>
              If you want to mix the destination files, its recommended to insert
              the %INDEX% placeholder at a first placeholder in the filename
              template for renaming. The system uses a file attribute for sorting
              (usually the name of the the file), when listing them.
            </p>
          </td>
        </tr>
      </table>
      
      <h2 id="howworks">Examples</h2>
      <p>
        The tool needs a source file, a destination folder and a destination size.
        It loads the image (jpg or png), resamples it to the desired size and
        saves the result to the destination folder, always using the original name.
      </p><p>
        To resample multiple files you can create a list of files like this
      </p><p>
        <span class="cmd">dir /B *.jpg &gt; imglist.txt</span>
      </p><p>
        To use the filelist, put an @ in front of the lists path and name
      </p><p>
        <span class="cmd">imgres @imglist.txt .\img640 640</span>
      </p><p>
        To resample multiple files in multiple resolutions, just enter multiple
        comma separated sizes without spaces.
      </p><p>
        Note: the placeholder %SIZE% in the destination path is required.
      </p><p>
        <span class="cmd">imgres @imglist.txt .\img%SIZE% 240,640,1280</span>
      </p><p>
        This creates a 640px jpg with a 640*60%=384px size watermark at the
        left bottom corner. 2% for the left margin, 98% percent means 2% from
        the bottom border.
      </p><p>
        <span class="cmd">imgres image.jpg img640 640 -w "watermark.png?60,2,98?20"</span>
      </p><p>
        This example demonstrates how to create all resized image files to a single
        folder. The trick is to build in the destination size into the filename
        that all filenames become unique.
      </p><p>
        <span class="cmd">imgres MyImages\*.jpg;*.png .\images 200,1920 -r "img%INDEX:1,3%_%SIZE%.%FILEEXT%"</span>
      </p><p>
        This example mixes the files randomly with a random seed of 1000.
      </p><p>
        <span class="cmd">imgres MyImages\*.jpg .\images 1920 -s 1000 -r "img%INDEX:1,3%.%FILEEXT%"</span>
      </p>

    </div>
    
    <footer>
      © 2023 Jan Schirrmacher, www.atomek.de
    </footer>
  </body>
</html>
